(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{110:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},114:function(e,t,n){e.exports=n(219)},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},133:function(e,t){},135:function(e,t){},168:function(e,t){},169:function(e,t){},175:function(e,t){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(43),c=n.n(i),o=n(11),s=n(36),u=(n(123),n(124),n(10)),l=n(5),d=n(6),m=n(8),p=n(7),f=n(9),h=(n(125),n(126),n(108)),b=n.n(h),v=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.score,a=b()(t.email).toString(),i="https://www.gravatar.com/avatar/".concat(a);return r.a.createElement("header",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},r.a.createElement("img",{"data-testid":"header-profile-picture",height:"35",src:i,alt:"Avatar"}),r.a.createElement("p",{"data-testid":"header-player-name"}," ",r.a.createElement("strong",null,"Name:")," ",t.user),r.a.createElement("p",{"data-testid":"header-score"}," ",r.a.createElement("strong",null,"Score:")," ",n)))}}]),t}(a.Component),y=Object(o.b)((function(e){return{user:e.user,score:e.score.total}}))(v),g=n(113),E=n(17),O=(n(212),n(45)),j=(n(213),n(220)),k=(n(214),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setTimer)()}},{key:"render",value:function(){var e=this.props.timer;return r.a.createElement("div",null,"Time:"," ",r.a.createElement("span",{className:"timer"},e))}}]),t}(a.Component));function w(e){return{type:"SCORE",payload:e}}var S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={nextStyle:"hidden",correctAnswer:{},wrongAnswer:{},timer:30,isDisabled:!1},n.checkAnswer=n.checkAnswer.bind(Object(E.a)(n)),n.handleNext=n.handleNext.bind(Object(E.a)(n)),n.setTimer=n.setTimer.bind(Object(E.a)(n)),n.setBorder=n.setBorder.bind(Object(E.a)(n)),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"setTimer",value:function(){var e=this;this.timer=setInterval((function(){e.setState((function(e){return Object(O.a)({},e,{timer:e.timer-1})}))}),1e3)}},{key:"setBorder",value:function(){var e=this;return new Promise((function(t){return t(e.setState((function(e){return Object(O.a)({},e,{nextStyle:"visible",correctAnswer:{border:"3px solid rgb(6, 240, 15)"},wrongAnswer:{border:"3px solid rgb(255, 0, 0)"},isDisabled:!0})})))}))}},{key:"convertDifficulty",value:function(e){return"hard"===e?3:"medium"===e?2:"easy"===e?1:void 0}},{key:"handleNext",value:function(){var e=this.props.nextQuestion;this.setState((function(e){return Object(O.a)({},e,{nextStyle:"hidden",correctAnswer:{},wrongAnswer:{},timer:30,isDisabled:!1})})),e(),clearInterval(this.timer),this.setTimer()}},{key:"checkAnswer",value:function(e){var t=this,n=e.target;this.setBorder().then((function(){clearInterval(t.timer);var e=t.props,a=e.setScore,r=e.setAssertions,i=JSON.parse(localStorage.getItem("state")),c=t.state.timer;if("correct"===n.value){i.player.assertions+=1,i.player.score+=10+c*t.convertDifficulty(n.getAttribute("level")),localStorage.setItem("state",JSON.stringify(i))}a(i.player.score),r(i.player.assertions)}))}},{key:"decodeHtml",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"renderTimer",value:function(){var e=this,t=this.state,n=t.timer,a=t.nextStyle;return 0===n&&"hidden"===a&&this.setBorder().then((function(){clearInterval(e.timer)})),r.a.createElement(k,{timer:n,setTimer:this.setTimer})}},{key:"renderQuestion",value:function(){var e=this,t=this.props,n=t.question,a=t.options,i=this.state,c=i.correctAnswer,o=i.wrongAnswer,s=i.timer,u=i.nextStyle,l=i.isDisabled,d=0===s||l;return r.a.createElement(r.a.Fragment,null,r.a.createElement("blockquote",{"data-testid":"question-category"},r.a.createElement("strong",null,n.category)),r.a.createElement("h4",{"data-testid":"question-text"},this.decodeHtml(n.question)),r.a.createElement("ul",null,a.map((function(t){return r.a.createElement("li",{key:t},r.a.createElement(j.a,{variant:"primary",style:t===n.correct_answer?c:o,value:t===n.correct_answer?"correct":"wrong",type:"button",level:n.difficulty,"data-testid":t===n.correct_answer?"correct-answer":"wrong-answer-".concat(a.indexOf(t)),onClick:e.checkAnswer,className:"optionsButtons",disabled:d},e.decodeHtml(t)))}))),r.a.createElement("button",{className:"nextBtn",type:"button",style:{visibility:u},onClick:this.handleNext,"data-testid":"btn-next"},"Next question"))}},{key:"render",value:function(){return r.a.createElement("div",{className:"card"},this.renderQuestion(),this.renderTimer())}}]),t}(a.Component),x=Object(o.b)(null,(function(e){return{setScore:function(t){return e(w(t))},setAssertions:function(t){return e(function(e){return{type:"ASSERTIONS",payload:e}}(t))}}}))(S),N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={perguntaIndex:0},n.nextQuestion=n.nextQuestion.bind(Object(E.a)(n)),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"nextQuestion",value:function(){this.setState((function(e){return{perguntaIndex:e.perguntaIndex+1}}))}},{key:"renderPerguntaCard",value:function(){var e=this.props.perguntas;if(e){var t=this.state.perguntaIndex,n=e[t],a=[].concat(Object(g.a)(n.incorrect_answers),[n.correct_answer]).sort((function(){return Math.random()-.5}));return r.a.createElement("div",{className:"main"},r.a.createElement(x,{question:n,options:a,nextQuestion:this.nextQuestion}))}return r.a.createElement("p",null,"Loading...")}},{key:"render",value:function(){return this.state.perguntaIndex>4?r.a.createElement(u.a,{to:"/feedback"}):r.a.createElement(r.a.Fragment,null,this.renderPerguntaCard())}}]),t}(a.Component),I=Object(o.b)((function(e){return{perguntas:e.perguntas.perguntas.results}}))(N),A=n(67),T=n.n(A);function C(e){return function(t){return function(e){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)).then((function(e){return e.json()})).catch((function(e){return e})));case 1:case"end":return t.stop()}}))}(e).then((function(e){return t({type:"REQUEST_PERGUNTAS",payload:e})}))}}var P=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.pedePerguntas)(localStorage.getItem("token"))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(I,null))}}]),t}(a.Component),B=Object(o.b)(null,(function(e){return{pedePerguntas:function(t){return e(C(t))}}}))(P),D=n(110),L=n.n(D),Q=(n(217),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isDisabled:!0,loginTrue:!1},n.validateLogin=n.validateLogin.bind(Object(E.a)(n)),n.btnPlay=n.btnPlay.bind(Object(E.a)(n)),n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){localStorage.clear()}},{key:"componentWillUnmount",value:function(){(0,this.props.pedePerguntas)(localStorage.getItem("token"))}},{key:"btnPlay",value:function(){var e=this,t=this.props.login;T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).catch((function(e){return e})));case 1:case"end":return e.stop()}})).then((function(e){localStorage.setItem("token","".concat(e.token))})).then((function(){e.setState({loginTrue:!0})}));var n=document.getElementById("email-input").value,a=document.getElementById("name-input").value;localStorage.setItem("state",JSON.stringify({player:{score:0,name:a,gravatarEmail:n,assertions:0}})),t({email:n,user:a})}},{key:"validateLogin",value:function(){var e=document.getElementById("email-input").value,t=document.getElementById("name-input").value,n=/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(e),a=t.length>=1;n&&a?this.setState({isDisabled:!1}):this.setState({isDisabled:!0})}},{key:"render",value:function(){var e=this.state,t=e.loginTrue,n=e.isDisabled;return t?r.a.createElement(u.a,{to:"/game"}):r.a.createElement("form",{className:"loginForm"},r.a.createElement("fieldset",{className:"fieldset"},r.a.createElement("input",{id:"name-input",type:"text","data-testid":"input-player-name",onChange:this.validateLogin,placeholder:"Name"}),r.a.createElement("input",{id:"email-input",type:"email","data-testid":"input-gravatar-email",onChange:this.validateLogin,placeholder:"Email"}),r.a.createElement(j.a,{variant:"success",type:"button",onClick:this.btnPlay,"data-testid":"btn-play",disabled:n},"Play")))}}]),t}(a.Component)),q=Object(o.b)(null,(function(e){return{login:function(t){return e({type:"LOGIN",payload:t})},pedePerguntas:function(t){return e(C(t))}}}))(Q),R=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"homeLogin"},r.a.createElement("img",{src:L.a,width:"400",alt:"trivia logo"}),r.a.createElement(q,null))}}]),t}(a.Component),_=(n(218),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){(0,this.props.setScore)(0)}},{key:"feedBack",value:function(e){switch(!0){case e<3:return r.a.createElement("h1",{"data-testid":"feedback-text"},"Could be better...");case e>=3:return r.a.createElement("h1",{"data-testid":"feedback-text"},"Well played!");default:return r.a.createElement("h2",null,"Error")}}},{key:"render",value:function(){var e=this.props,t=e.score,n=e.assertions;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),r.a.createElement("section",{className:"feedback"},r.a.createElement("div",{className:"message"},this.feedBack(n),r.a.createElement("h5",{"data-testid":"feedback-total-question"},r.a.createElement("strong",null,"Assertions:")," ",r.a.createElement("span",null,n)),r.a.createElement("h5",{"data-testid":"feedback-total-score"},r.a.createElement("strong",null,"Total score:")," ",r.a.createElement("span",null,t)))),r.a.createElement("div",{className:"buttons"},r.a.createElement(s.b,{to:"/"},r.a.createElement(j.a,{variant:"info",type:"button","data-testid":"btn-play-again"},"PLAY AGAIN"))))}}]),t}(a.Component)),U=Object(o.b)((function(e){return{score:e.score.total,assertions:e.assertions.total}}),(function(e){return{setScore:function(t){return e(w(t))}}}))(_);var M=n(25),G=n(111),J=n(112),W={email:""},F={perguntas:[]},H={total:0},Y={total:0},$=Object(M.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{email:t.payload.email,user:t.payload.user};default:return e}},perguntas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_PERGUNTAS":return{perguntas:t.payload};default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SCORE":return{total:t.payload};default:return e}},assertions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASSERTIONS":return{total:t.payload};default:return e}}}),z=Object(M.createStore)($,Object(G.composeWithDevTools)(Object(M.applyMiddleware)(J.a)));c.a.render(r.a.createElement(s.a,null,r.a.createElement(o.a,{store:z},r.a.createElement((function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:R}),r.a.createElement(u.b,{exact:!0,path:"/game",component:B}),r.a.createElement(u.b,{exact:!0,path:"/feedback",component:U}))}),null))),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.5d3f1baf.chunk.js.map